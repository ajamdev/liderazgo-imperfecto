---
import Liderazgo from '@/assets/liderazgo-imperfecto.svg'
import HeaderLink from "./HeaderLink.astro";
---

<header class="fixed top-0 left-0 w-full z-50 transition-all duration-300 bg-transparent" id="menu">
  <div class="container mx-auto p-4 md:px-20 xl:px-40 flex justify-between items-center">
    <a href="/"> <Liderazgo class="w-auto h-10"/> </a>
    <nav>
      <ul class="flex space-x-5">
        <li><HeaderLink href="/">Inicio</HeaderLink></li>
        <li><HeaderLink href="/nosotros">Nosotros</HeaderLink></li>
      </ul>
    </nav>
  </div>
</header>

<script type="module">
  function initMenu() {
    const menu = document.getElementById("menu");
    if (!menu) return;
    
    let lastScroll = 0;
    
    function handleScroll() {
      const currentScroll = window.scrollY;
      
      if (currentScroll > 50) {
        menu.classList.remove("bg-transparent");
        menu.classList.add("bg-black/30", "backdrop-blur-md", "text-white");
      } else {
        menu.classList.remove("bg-black/30", "backdrop-blur-md", "text-white");
        menu.classList.add("bg-transparent");
      }
      
      lastScroll = currentScroll;
    }
    
    window.addEventListener("scroll", handleScroll);
    
    // Verificar el scroll inicial
    handleScroll();
  }
  
  // Ejecutar cuando el DOM est√© listo
  if (document.readyState === "loading") {
    document.addEventListener("DOMContentLoaded", initMenu);
  } else {
    initMenu();
  }
  
  // Re-ejecutar en navegaciones de Astro
  document.addEventListener("astro:page-load", initMenu);
</script>